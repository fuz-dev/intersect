import{l as O,r as h,n as A,v as T,E as p,g as q,w as y,L as U,x as Y,f as o,e as k,u as w,y as b,z as x,m as z}from"./runtime.21xi6-QE.js";import{h as C,H as F,r as H,i as D,d as M,P as $,j,k as B,l as G}from"./disclose-version.GU8E7gNk.js";function J(a,s,i,l=null,m=!1){var r=null,u=null,n=null,t=m?p:0;O(()=>{if(n===(n=!!s()))return;let f=!1;if(C){const d=a.data===F;n===d&&(H(M),D(!1),f=!0)}n?(r?h(r):r=A(()=>i(a)),u&&T(u,()=>{u=null})):(u?h(u):l&&(u=A(()=>l(a))),r&&T(r,()=>{r=null})),f&&D(!0)},t)}function K(a,s,i,l){var R;var m=(i&j)!==0,r=(i&B)!==0,u=(i&G)!==0,n=a[s],t=(R=q(a,s))==null?void 0:R.set,f=l,d=!0,S=()=>(u&&d&&(d=!1,f=w(l)),f);n===void 0&&l!==void 0&&(t&&r&&y(),n=S(),t&&t(n));var _;if(r)_=()=>{var e=a[s];return e===void 0?S():(d=!0,e)};else{var I=(m?b:x)(()=>a[s]);I.f|=U,_=()=>{var e=o(I);return e!==void 0&&(f=void 0),e===void 0?f:e}}if(!(i&$))return _;if(t){var L=a.$$legacy;return function(e,v){return arguments.length>0?((!r||!v||L)&&t(v?_():e),e):_()}}var E=!1,P=z(n),c=b(()=>{var e=_(),v=o(P);return E?(E=!1,v):P.v=e});return m||(c.equals=Y),function(e,v){var N=o(c);if(arguments.length>0){const g=v?o(c):e;return c.equals(g)||(E=!0,k(P,g),o(c)),e}return N}}export{J as i,K as p};
